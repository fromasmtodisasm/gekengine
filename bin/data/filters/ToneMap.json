{
    "textures": {
        "luminanceBuffer": {
            "bind": "float",
            "flags": "target",
            "mipmaps": "0",
            "format": "R16_FLOAT"
        }
    },
    "buffers": {
        "averageLuminanceBuffer": {
            "count": "1",
            "flags": "unorderedAccess",
            "format": "R32_FLOAT"
        }
    },
    "passes": [
        {
            "program": "CalculateLuminance",
            "entry": "mainPixelProgram",
            "resources": [
                "screen"
            ],
            "targets": [
                "luminanceBuffer"
            ]
        },
        {
            "program": "AdaptLuminance",
            "entry": "mainComputeProgram",
            "mode": "compute",
            "dispatch": "(1, 1, 1)",
            "defines": {
                "adaptionRate": "1.25"
            },
            "generateMipMaps": [
                "luminanceBuffer"
            ],
            "resources": [
                "luminanceBuffer"
            ],
            "unorderedAccess": [
                "averageLuminanceBuffer"
            ]
        },
        {
            "program": "ToneMap",
            "entry": "mainPixelProgram",
            "defines": {
                "techniqueMode": {
                    "bind": "int",
                    "value": "7"
                },
                "autoExposureMode": {
                    "bind": "int",
                    "value": "2"
                },
                "luminanceSaturation": "1.0",
                "keyValue": "0.18",
                "exposure": "0.0",
                "whiteLevel": "5.0",
                "bias": "0.5",
                "shoulderStrength": "0.2",
                "linearStrength": "0.5",
                "linearAngle": "0.42",
                "toeStrength": "0.64",
                "toeNumerator": "0.19",
                "toeDenominator": "0.9",
                "linearWhite": "11.2"
            },
            "copy": {
                "screenBuffer": "screen"
            },
            "resources": [
                "averageLuminanceBuffer",
                "screenBuffer"
            ],
            "targets": [
                "screen"
            ]
        }
    ]
}