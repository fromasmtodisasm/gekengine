{
    "textures": {
        "luminanceBuffer": {
            "bind": "float",
            "flags": "target",
            "mipmaps": 0,
            "format": "R16_FLOAT"
        }
    },
    "buffers": {
        "averageLuminanceBuffer": {
            "count": 1,
            "flags": "unorderedAccess",
            "format": "R32_FLOAT"
        }
    },
    "passes": [
        {
            "program": "CalculateLuminance",
            "entry": "mainPixelProgram",
            "resources": [
                "screen"
            ],
            "targets": [
                "luminanceBuffer"
            ]
        },
        {
            "program": "AdaptLuminance",
            "entry": "mainComputeProgram",
            "mode": "compute",
            "dispatch": [ 1, 1, 1 ],
            "generateMipMaps": [
                "luminanceBuffer"
            ],
            "resources": [
                "luminanceBuffer"
            ],
            "unorderedAccess": [
                "averageLuminanceBuffer"
            ]
        },
        {
            "program": "ToneMap",
            "entry": "mainPixelProgram",
            "copy": {
                "screenBuffer": "screen"
            },
            "resources": [
                "averageLuminanceBuffer",
                "screenBuffer"
            ],
            "targets": [
                "screen"
            ]
        }
    ]
}