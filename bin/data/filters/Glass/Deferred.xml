<?xml version="1.0"?>
<!DOCTYPE filter [
    <!ENTITY DeferredShader PUBLIC "%root%/data/filters/Shared/Deferred.xml" "">
]>
<filter mode="forward">
    <render cullmode="back" />
    
    <targets>
        <target source="Opaque/Deferred.Albedo" />
        <target name="World" format="RGBA_FLOAT" />
        <target source="Opaque/Deferred.Info" />
        <depth source="Opaque/Deferred" comparison="lessequal" writemask="all">
            <stencil reference="1" readmask="255" writemask="255" clear="0">
                <front pass="replace" fail="keep" depthfail="keep" comparison="always" />
                <back pass="keep" fail="keep" depthfail="keep" comparison="never" />
            </stencil>
        </depth>
    </targets>
        
    <pixel>
        &DeferredShader;
    </pixel>
</filter>
