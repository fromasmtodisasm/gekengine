<?xml version="1.0"?>
<!DOCTYPE filter [
    <!ENTITY LightingShader PUBLIC "%root%/data/filters/Shared/Lighting.xml" "">
]>
<filter>
    <targets>
        <target name="Diffuse" format="RGBA_UINT8" clear="0,0,0,0" />
        <target name="Specular" format="RGBA_UINT8" clear="0,0,0,0" />
    </targets>
    <textures>
        <texture source="Opaque/Deferred.Albedo" />
        <texture source="Glass/Deferred.World" />
        <texture source="Opaque/Deferred.Info" />
    </textures>
    <blend>
        <color source="one" destination="one" operation="add" />
        <alpha source="one" destination="one" operation="add" />
    </blend>
    <pixel mode="lighting">
        &LightingShader;
        <![CDATA[
            struct OUTPUT
            {
                float4 diffuse                      : SV_TARGET0;
                float4 specular                     : SV_TARGET1;
            };

            OUTPUT MainPixelProgram(INPUT kInput)
            {
                OUTPUT kOutput = (OUTPUT)0;
                GetLightingContribution(kInput, kOutput.diffuse.xyz, kOutput.specular.xyz);
                return kOutput;
            }
        ]]>
    </pixel>
</filter>
