<?xml version="1.0"?>
<filter>
    <defines>
        <define name="gs_nAmbientLight" value=".05" />
    </defines>

    <pixel>
        <resources>
            <resource stage="1" source="Opaque/Deferred.Albedo" />
        </resources>

        <![CDATA[
            Texture2D     gs_pAlbedoBuffer          : register(t1);

            float4 MainPixelProgram(in INPUT kInput) : SV_TARGET0
            {
                float4 nAlbedo = gs_pAlbedoBuffer.Sample(gs_pPointSampler, kInput.texcoord);

                [branch]
                if (nAlbedo.a < 1.0f)
                {
                    nAlbedo *= gs_nAmbientLight;
                }
                
                return nAlbedo;
            }
        ]]>
    </pixel>
</filter>
